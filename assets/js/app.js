(function(){var s,e,n,i;window.skip=!1,s=$(".main > *"),s.width()*s.length<$(window).width()?$(".main").addClass("mini"):($(".main").prepend('<span class="main-before"></span>'),$(".main").append('<span class="main-after"></span>')),$(".candidate .choices").append('<span class="choices-visualizer"><span class="agree"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="600px" height="600px" viewBox="0 0 600 600" xml:space="preserve"><circle class="background" cx="300" cy="300" r="360"/><path class="icon" d="M300,125c46.744,0,90.691,18.203,123.744,51.256S475,253.256,475,300 s-18.203,90.691-51.256,123.744S346.744,475,300,475s-90.691-18.203-123.744-51.256S125,346.744,125,300 s18.203-90.691,51.256-123.744S253.256,125,300,125 M300,75C175.736,75,75,175.736,75,300s100.736,225,225,225s225-100.736,225-225 S424.264,75,300,75L300,75z"/></svg></span><span class="none"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="600px" height="600px" viewBox="0 0 600 600" xml:space="preserve"><circle class="background" cx="300" cy="300" r="360"/><rect class="icon" x="125" y="275" width="350" height="50"/></svg></span><span class="disagree"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="600px" height="600px" viewBox="0 0 600 600" xml:space="preserve"><circle class="background" cx="300" cy="300" r="360"/><polygon class="icon" points="476.776,158.579 441.421,123.224 300,264.645 158.579,123.224 123.224,158.579 264.645,300 123.224,441.421 158.579,476.776 300,335.355 441.421,476.776 476.776,441.421 335.355,300"/></svg></span></span>'),setTimeout(function(){return $(".input").removeClass("shake")},1e3),((null!=(e=$("#password3").val())?e.length:void 0)>0||(null!=(n=$("#password2").val())?n.length:void 0)>0||(null!=(i=$("#password1").val())?i.length:void 0)>0)&&($("#password1").val(""),$("#password2").val(""),$("#password3").val("")),$("#password1").keyup(function(){return $(this).val($(this).val().toUpperCase()),$(this).val().length>=$(this).attr("maxlength")?($("#password2").focus(),setTimeout(function(){return $("#password2").focus()},1e3)):void 0}),$("#password2").keyup(function(){return $(this).val($(this).val().toUpperCase()),$(this).val().length>=$(this).attr("maxlength")?$("#password3").focus():void 0}),$("#password3").keyup(function(){return $(this).val($(this).val().toUpperCase())}),$("#password1").keydown(function(){return $(".input").removeClass("error")}),$("#password2").keydown(function(s){return $(".input").removeClass("error"),0!==$(this).val().length||8!==s.keyCode&&37!==s.keyCode?void 0:$("#password1").focus()}),$("#password3").keydown(function(s){return $(".input").removeClass("error"),0!==$(this).val().length||8!==s.keyCode&&37!==s.keyCode?void 0:$("#password2").focus()}),$(".candidate.selection").each(function(){return $(this).click(function(){return $(this).hasClass("selected")?($(".candidate.selection").removeClass("selected"),$("#selection").val("")):($("#selection").val($(this).children(".id").html()),$(".candidate.selection").removeClass("selected"),$(this).addClass("selected"))})}),$(".token-form").submit(function(){return $("#password1").val().match("[A-Z][0-9][A-Z]{2}")&&$("#password2").val().match("[A-Z]{3}")&&$("#password3").val().match("[A-Z]{3}")?!0:($(".input").addClass("error animated shake"),setTimeout(function(){return $(".input").removeClass("shake")},1e3),$("#password3").focus(),!1)}),$(".single-selection-form").submit(function(s){return console.log(s),$(".candidate.selection.selected")[0]?window.skip||confirm("\u60a8\u6c7a\u5b9a\u6295\u7d66 "+$("#selection").val()+" \u865f "+$(".candidate.selection.selected").children(".name").html()+"\uff0c\u78ba\u5b9a\u55ce\uff1f\n You\u2019ve decided to vote for No. "+$("#selection").val()+" - "+$(".candidate.selection.selected").children(".name").html()+", is that right?")?($('input[type="submit"]').prop("disabled",!0),$("body").addClass("sending"),!0):!1:window.skip||confirm("\u60a8\u6c7a\u5b9a\u6295\u7a7a\u767d\u5ee2\u7968\uff0c\u78ba\u5b9a\u55ce\uff1f\n You\u2019ve decided to cast a blank ballot, is that right?")?($('input[type="submit"]').prop("disabled",!0),$("body").addClass("sending"),!0):!1}),$(".multiple-selection-form").submit(function(s){return console.log(s),window.skip||confirm("\u78ba\u5b9a\u9001\u51fa\uff1f\n Are you sure you want to submit?")?($('input[type="submit"]').prop("disabled",!0),$("body").addClass("sending"),!0):!1}),$("button.skip").click(function(){return confirm("\u78ba\u5b9a\u7565\u904e\u6b64\u6295\u7968\uff1f\n Are you sure you want to skip?")?($("input.skipped").val(!0),$(".candidate.selection").removeClass("selected"),$("#selection").val(""),$("input.none").prop("checked",!0),window.skip=!0,$("body").addClass("skipping"),!0):!1}),Modernizr.cssvhunit&&Modernizr.csscalc||($(".main").css("height",$(window).height()+"px"),$(".main").css("padding-top",.2*$(window).height()+"px"),$(".main").css("margin-top",.2*-$(window).height()+"px"),$(".candidate .pic").css("height",.8*$(window).height()-$(".candidate .id").height()-$(".candidate .elect").height()-$(".candidate .choices").height()-$(".candidate .name").height()-60+"px")),setTimeout(function(){return $("body").addClass("ready")},300)}).call(this);